{
  "hash": "fb4be24f80d4a4ae2660c866a88417b4",
  "result": {
    "markdown": "---\ntitle: \"Challenge 5\"\nauthor: \"Tim Shores\"\ndescription: \"Introduction to Visualization\"\ndate: \"03/18/2022\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_5\n  - railroads\n  - cereal\n  - air_bnb\n  - pathogen_cost\n  - australian_marriage\n  - public_schools\n  - usa_households\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_packages <- c(\"tidyverse\", \"readxl\", \"knitr\", \"ggplot2\") # create vector of packages\ninvisible(lapply(my_packages, require, character.only = TRUE)) # load multiple packages\n\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in a data set, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  mutate variables as needed (including sanity checks)\n4)  create at least two univariate visualizations\n   - try to make them \"publication\" ready\n   - Explain why you choose the specific graph type\n5)  Create at least one bivariate visualization\n   - try to make them \"publication\" ready\n   - Explain why you choose the specific graph type\n\n[R Graph Gallery](https://r-graph-gallery.com/) is a good starting point for thinking about what information is conveyed in standard graph types, and includes example R code.\n\n(be sure to only include the category tags for the data you use!)\n\n## Read in data\n\n...\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndfPubSchool <- read.csv(file = \"../posts/_data/Public_School_Characteristics_2017-18.csv\") # read in data\npsrows <- prettyNum(nrow(dfPubSchool), big.mark = \",\", scientific = FALSE)  # Apply comma-separated format\npscols <- prettyNum(ncol(dfPubSchool), big.mark = \",\", scientific = FALSE)\n\nnumtoprint <- 12\n```\n:::\n\n\n### Briefly describe the data\n\nThe public school characteristics (2017-18) data set includes **100,729** observations under **79** variables. It shows ... . The data is likely the product of ....\n\nHere are the first 12 rows from the data.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndfPubSchool[1:numtoprint,]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n           X        Y OBJECTID     NCESSCH                            NMCNTY\n1  -149.3578 61.62714        1 20051000480         Matanuska-Susitna Borough\n2  -156.7542 71.30034        2 20061000470               North Slope Borough\n3  -151.0701 60.49144        3 20039000448           Kenai Peninsula Borough\n4  -151.2791 60.56828        4 20039000463           Kenai Peninsula Borough\n5  -151.2323 60.56700        5 20039000513           Kenai Peninsula Borough\n6  -133.1287 56.11917        6 20070000526 Prince of Wales-Hyder Census Area\n7  -134.5846 57.49773        7 20073000477         Hoonah-Angoon Census Area\n8  -149.0140 63.87342        8 20077000447                    Denali Borough\n9  -165.7723 54.13496        9 20000700004            Aleutians East Borough\n10 -163.4184 54.85316       10 20000700007            Aleutians East Borough\n11 -162.2958 55.04728       11 20000700177            Aleutians East Borough\n12 -160.4758 55.35155       12 20000700461            Aleutians East Borough\n    SURVYEAR STABR  LEAID ST_LEAID                                  LEA_NAME\n1  2017-2018    AK 200510    AK-33 Matanuska-Susitna Borough School District\n2  2017-2018    AK 200610    AK-36       North Slope Borough School District\n3  2017-2018    AK 200390    AK-24   Kenai Peninsula Borough School District\n4  2017-2018    AK 200390    AK-24   Kenai Peninsula Borough School District\n5  2017-2018    AK 200390    AK-24   Kenai Peninsula Borough School District\n6  2017-2018    AK 200700    AK-44          Southeast Island School District\n7  2017-2018    AK 200730    AK-09                   Chatham School District\n8  2017-2018    AK 200770    AK-02            Denali Borough School District\n9  2017-2018    AK 200007    AK-56    Aleutians East Borough School District\n10 2017-2018    AK 200007    AK-56    Aleutians East Borough School District\n11 2017-2018    AK 200007    AK-56    Aleutians East Borough School District\n12 2017-2018    AK 200007    AK-56    Aleutians East Borough School District\n                                SCH_NAME               LSTREET1 LSTREET2\n1                   John Shaw Elementary     3750 E Paradise Ln         \n2               Kiita Learning Community         5246 Karluk St         \n3     Soldotna Montessori Charter School         158 E Park Ave         \n4  Kaleidoscope School of Arts & Science        549 N Forest Dr         \n5                        Marathon School        405 Marathon Rd         \n6                      Whale Pass School         126 Bayview Rd         \n7                 Chatham Correspondence 500 Big Dog Salmon Way         \n8                            Denali PEAK          1 Suntrana St         \n9                          Akutan School         202 Volcano Dr         \n10                     False Pass School          300 Valley Rd         \n11                      King Cove School          100 Slocum Dr         \n12                     Sand Point School        123 Red Cove Rd         \n   LSTREET3      LCITY LSTATE  LZIP LZIP4         PHONE GSLO GSHI\n1              Wasilla     AK 99654    NA (907)352-0500   PK   05\n2            Utqiagvik     AK 99723    NA (907)852-9677   09   12\n3             Soldotna     AK 99669    NA (907)260-9221   KG   06\n4                Kenai     AK 99611    NA (907)283-0804   KG   05\n5                Kenai     AK 99611    NA (907)335-3343   07   12\n6           Whale Pass     AK 99950    NA (907)846-5320   PK   12\n7               Angoon     AK 99820    NA (907)788-3302   KG   12\n8                Healy     AK 99743    NA (907)683-2278   PK   12\n9               Akutan     AK 99553    NA (907)698-2205   PK   12\n10          False Pass     AK 99583    NA (907)548-2224   PK   12\n11           King Cove     AK 99612    69 (907)497-2354   PK   12\n12          Sand Point     AK 99661    NA (907)383-2393   PK   12\n                VIRTUAL TOTFRL FRELCH REDLCH PK KG G01 G02 G03 G04 G05 G06 G07\n1  Not a virtual school    183    158     25 30 81  63  80  62  58  73  NA  NA\n2  Not a virtual school     27     27      0 NA NA  NA  NA  NA  NA  NA  NA  NA\n3  Not a virtual school     43     23     20 NA 23  23  27  22  25  28  19  NA\n4  Not a virtual school     69     50     19 NA 40  43  42  46  46  43  NA  NA\n5  Not a virtual school     -9     -9     -9 NA NA  NA  NA  NA  NA  NA  NA   0\n6  Not a virtual school     17     17      0  0  0   3   1   2   2   2   1   5\n7  Not a virtual school      3     -1     -1 NA  2   2   1   1   1   0   0   0\n8  Not a virtual school      3     -1     -1 42 40  44  56  59  61  59  54  55\n9  Not a virtual school      3     -1     -1  0  4   0   3   1   1   0   2   0\n10 Not a virtual school     -9     -9     -9  0  0   0   1   1   0   1   0   1\n11 Not a virtual school      3     -1     -1 11  2   6   7   5   8   6  11   7\n12 Not a virtual school      3     -1     -1 14  5  10   9  13   4  13   8   8\n   G08 G09 G10 G11 G12 G13 TOTAL MEMBER AM HI BL  WH HP TR   FTE   LATCOD\n1   NA  NA  NA  NA  NA  NA   447    447 50 12  5 351  2 23 24.90 61.62714\n2   NA   0   3   7  20  NA    30     30 27  0  0   0  1  2  3.00 71.30034\n3   NA  NA  NA  NA  NA  NA   167    167  8  5  0 136  0 15 10.35 60.49144\n4   NA  NA  NA  NA  NA  NA   260    260 16 14  3 168  0 56 16.75 60.56828\n5    1   1   2   1   0  NA     5      5  0  0  1   3  1  0  0.67 60.56700\n6    1   0   0   0   1  NA    18     18  0  1  0  13  0  4  1.90 56.11918\n7    0   1   2   0   1  NA    11     11  2  0  5   4  0  0  0.00 57.49773\n8   74  47  51  48  47  NA   737    737 53 76 39 443  8 97  5.79 63.87342\n9    0   0   0   1   1  NA    13     13 11  0  0   1  0  1  1.96 54.13496\n10   1   1   0   0   0  NA     6      6  4  0  0   2  0  0  1.39 54.85316\n11   2   8   6   8   7  NA    94     94 84  2  0   6  0  0 12.00 55.04728\n12   7   5  10   5   9  NA   120    120 79  2  0  13 10  5 12.95 55.35155\n      LONCOD          ULOCALE STUTERATIO        STITLEI AMALM AMALF ASALM ASALF\n1  -149.3579 41-Rural: Fringe      17.95            Yes    33    17     1     3\n2  -156.7542  33-Town: Remote      10.00 Not Applicable    16    11     0     0\n3  -151.0702  33-Town: Remote      16.14 Not Applicable     4     4     0     3\n4  -151.2791  33-Town: Remote      15.52 Not Applicable    10     6     1     2\n5  -151.2323  33-Town: Remote       7.46            Yes     0     0     0     0\n6  -133.1287 43-Rural: Remote       9.47            Yes     0     0     0     0\n7  -134.5846 43-Rural: Remote         NA Not Applicable     1     1     0     0\n8  -149.0141 43-Rural: Remote     127.29 Not Applicable    21    32    13     8\n9  -165.7723 43-Rural: Remote       6.63            Yes     6     5     0     0\n10 -163.4184 43-Rural: Remote       4.32            Yes     2     2     0     0\n11 -162.2958 43-Rural: Remote       7.83            Yes    41    43     1     1\n12 -160.4758 43-Rural: Remote       9.27            Yes    39    40     5     6\n   HIALM HIALF BLALM BLALF WHALM WHALF HPALM HPALF TRALM TRALF TOTMENROL\n1     10     2     3     2   193   158     0     2    11    12       251\n2      0     0     0     0     0     0     1     0     1     1        18\n3      2     3     0     0    58    78     0     0     7     8        71\n4      6     8     3     0    82    86     0     0    26    30       128\n5      0     0     0     1     1     2     0     1     0     0         1\n6      1     0     0     0     5     8     0     0     4     0        10\n7      0     0     3     2     1     3     0     0     0     0         5\n8     33    43    20    19   221   222     4     4    48    49       360\n9      0     0     0     0     0     1     0     0     1     0         7\n10     0     0     0     0     1     1     0     0     0     0         3\n11     1     1     0     0     3     3     0     0     0     0        46\n12     2     0     0     0     7     6     5     5     3     2        61\n   TOTFENROL STATUS UG AE         SCHOOL_TYPE_TEXT         SY_STATUS_TEXT\n1        196      1 NA NA           Regular school Currently operational \n2         12      1 NA NA Alternative/other school Currently operational \n3         96      1 NA NA           Regular school Currently operational \n4        132      1 NA NA           Regular school Currently operational \n5          4      1 NA NA Alternative/other school Currently operational \n6          8      1 NA NA           Regular school Currently operational \n7          6      1 NA NA           Regular school Currently operational \n8        377      1 NA NA           Regular school Currently operational \n9          6      1 NA NA           Regular school Currently operational \n10         3      1 NA NA           Regular school Currently operational \n11        48      1 NA NA           Regular school Currently operational \n12        59      1 NA NA           Regular school Currently operational \n   SCHOOL_LEVEL AS CHARTER_TEXT MAGNET_TEXT\n1    Elementary  4           No          No\n2          High  0           No          No\n3    Elementary  3          Yes          No\n4    Elementary  3          Yes          No\n5          High  0           No          No\n6         Other  0           No          No\n7         Other  0           No          No\n8         Other 21           No          No\n9         Other  0           No          No\n10        Other  0           No          No\n11        Other  2           No          No\n12        Other 11           No          No\n```\n:::\n:::\n\n\n## Tidy Data (as needed)\n\nIs your data already tidy, or is there work to be done? Be sure to anticipate your end result to provide a sanity check, and document your work here.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndfPubSchoolSub <- tibble(dfPubSchool) %>%\n  subset(select = \n           c(NMCNTY, PK, KG, G01, G02, G03, G04, G05, G06, G07, G08, G09, G10, G11, G12, G13, TOTAL, FTE, SCHOOL_TYPE_TEXT, SY_STATUS_TEXT, SCHOOL_LEVEL)) %>%\n  mutate(SCHOOL_TYPE_TEXT = factor(SCHOOL_TYPE_TEXT), \n         SY_STATUS_TEXT = factor(str_trim(SY_STATUS_TEXT)), # remove extra whitespace before converting to factor\n         SCHOOL_LEVEL = factor(SCHOOL_LEVEL)) %>% \n  print(n = 12, width = Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 100,729 × 21\n   NMCNTY                               PK    KG   G01   G02   G03   G04   G05\n   <chr>                             <int> <int> <int> <int> <int> <int> <int>\n 1 Matanuska-Susitna Borough            30    81    63    80    62    58    73\n 2 North Slope Borough                  NA    NA    NA    NA    NA    NA    NA\n 3 Kenai Peninsula Borough              NA    23    23    27    22    25    28\n 4 Kenai Peninsula Borough              NA    40    43    42    46    46    43\n 5 Kenai Peninsula Borough              NA    NA    NA    NA    NA    NA    NA\n 6 Prince of Wales-Hyder Census Area     0     0     3     1     2     2     2\n 7 Hoonah-Angoon Census Area            NA     2     2     1     1     1     0\n 8 Denali Borough                       42    40    44    56    59    61    59\n 9 Aleutians East Borough                0     4     0     3     1     1     0\n10 Aleutians East Borough                0     0     0     1     1     0     1\n11 Aleutians East Borough               11     2     6     7     5     8     6\n12 Aleutians East Borough               14     5    10     9    13     4    13\n     G06   G07   G08   G09   G10   G11   G12   G13 TOTAL    FTE\n   <int> <int> <int> <int> <int> <int> <int> <int> <int>  <dbl>\n 1    NA    NA    NA    NA    NA    NA    NA    NA   447 24.9  \n 2    NA    NA    NA     0     3     7    20    NA    30  3    \n 3    19    NA    NA    NA    NA    NA    NA    NA   167 10.4  \n 4    NA    NA    NA    NA    NA    NA    NA    NA   260 16.8  \n 5    NA     0     1     1     2     1     0    NA     5  0.670\n 6     1     5     1     0     0     0     1    NA    18  1.90 \n 7     0     0     0     1     2     0     1    NA    11  0    \n 8    54    55    74    47    51    48    47    NA   737  5.79 \n 9     2     0     0     0     0     1     1    NA    13  1.96 \n10     0     1     1     1     0     0     0    NA     6  1.39 \n11    11     7     2     8     6     8     7    NA    94 12    \n12     8     8     7     5    10     5     9    NA   120 12.9  \n   SCHOOL_TYPE_TEXT         SY_STATUS_TEXT        SCHOOL_LEVEL\n   <fct>                    <fct>                 <fct>       \n 1 Regular school           Currently operational Elementary  \n 2 Alternative/other school Currently operational High        \n 3 Regular school           Currently operational Elementary  \n 4 Regular school           Currently operational Elementary  \n 5 Alternative/other school Currently operational High        \n 6 Regular school           Currently operational Other       \n 7 Regular school           Currently operational Other       \n 8 Regular school           Currently operational Other       \n 9 Regular school           Currently operational Other       \n10 Regular school           Currently operational Other       \n11 Regular school           Currently operational Other       \n12 Regular school           Currently operational Other       \n# … with 100,717 more rows\n```\n:::\n:::\n\n\nAre there any variables that require mutation to be usable in your analysis stream? For example, do you need to calculate new values in order to graph them? Can string values be represented numerically? Do you need to turn any variables into factors and reorder for ease of graphics and visualization?\n\nDocument your work here.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#define function to calculate mode\nfind_mode <- function(x) {\n  u <- unique(x[!is.na(x)]) # unique list as an index, without NA\n  tab <- tabulate(match(x[!is.na(x)], u))  # count how many times each index member occurs\n  u[tab == max(tab)] #  the max occurrence is the mode\n  mean(u) # return mean in case the data is multimodal\n}\n\ndfPubSchoolSub %>% \n  #group_by(NMCNTY) %>% \n  summarise(\n    meanFTE = mean(FTE, na.rm = TRUE), \n    modeFTE = find_mode(FTE), \n    minFTE = fivenum(FTE, na.rm = TRUE)[1], \n    lowHingeFTE = fivenum(FTE, na.rm = TRUE)[2], \n    medianFTE = median(FTE, na.rm = TRUE), \n    upHingeFTE = fivenum(FTE, na.rm = TRUE)[4], \n    maxFTE = fivenum(FTE, na.rm = TRUE)[5], \n    count = n()\n    ) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 8\n  meanFTE modeFTE minFTE lowHingeFTE medianFTE upHingeFTE maxFTE  count\n    <dbl>   <dbl>  <dbl>       <dbl>     <dbl>      <dbl>  <dbl>  <int>\n1    32.6    59.9      0          17      27.6         41   1419 100729\n```\n:::\n\n```{.r .cell-code}\ndfPubSchoolSub %>% \n  subset(select = c(NMCNTY, FTE)) %>%\n  group_by(NMCNTY) %>%\n  #filter(FTE <= 1200) %>% \n  ggplot(aes(x = FTE)) +\n  geom_boxplot(outlier.colour = \"red\",\n         outlier.shape = 2,\n         outlier.size = 3) +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](TimShores_challenge5_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\ndfPubSchoolSub %>% \n  subset(select = c(NMCNTY, FTE)) %>%\n  group_by(NMCNTY) %>%\n  filter(FTE <= 1200) %>% \n  ggplot(aes(x = FTE)) +\n  geom_boxplot(outlier.colour = \"red\",\n         outlier.shape = 2,\n         outlier.size = 3) +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](TimShores_challenge5_files/figure-html/unnamed-chunk-5-2.png){width=672}\n:::\n\n```{.r .cell-code}\ndfPubSchoolSub %>% \n  subset(select = c(NMCNTY, FTE)) %>%\n  group_by(NMCNTY) %>%\n  filter(FTE <= 200) %>% \n  ggplot(aes(x = FTE)) +\n  geom_boxplot(outlier.colour = \"red\",\n         outlier.shape = 2,\n         outlier.size = 3) +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](TimShores_challenge5_files/figure-html/unnamed-chunk-5-3.png){width=672}\n:::\n:::\n\n\n## Univariate Visualizations\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndfPubSchoolSub %>%\n  subset(select = c(NMCNTY, FTE)) %>%\n  group_by(NMCNTY) %>%\n  arrange(desc(FTE)) %>%\n  print(n = 20) %>%\n  filter(FTE <= 200) %>%\n  ggplot(aes(x = FTE)) + \n    geom_histogram(binwidth = 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 100,729 × 2\n# Groups:   NMCNTY [1,959]\n   NMCNTY              FTE\n   <chr>             <dbl>\n 1 Orange County     1419 \n 2 Oklahoma County    445 \n 3 Clayton County     386 \n 4 Montgomery County  372.\n 5 Beaver County      365 \n 6 Dauphin County     341 \n 7 Alexandria city    330.\n 8 Passaic County     302 \n 9 Harris County      301.\n10 Harris County      286.\n11 Dallas County      284.\n12 Denton County      283.\n13 Essex County       282.\n14 Lake County        280.\n15 Hamilton County    278.\n16 Lake County        274.\n17 Fairfax County     272.\n18 Franklin County    268 \n19 Harris County      265.\n20 Harris County      262.\n# … with 100,709 more rows\n```\n:::\n\n::: {.cell-output-display}\n![](TimShores_challenge5_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n```{.r .cell-code}\ndfPubSchoolSub %>%\n  subset(select = c(NMCNTY, FTE)) %>%\n  group_by(NMCNTY) %>%\n  filter(FTE > 200, FTE <= 1200) %>%\n  ggplot(aes(x = FTE)) + \n    geom_histogram(binwidth = 20)\n```\n\n::: {.cell-output-display}\n![](TimShores_challenge5_files/figure-html/unnamed-chunk-6-2.png){width=672}\n:::\n\n```{.r .cell-code}\ndfPubSchoolSub %>%\n  subset(select = c(NMCNTY, FTE)) %>%\n  group_by(NMCNTY) %>%\n  filter(FTE > 1200) %>%\n  ggplot(aes(x = FTE)) + \n    geom_histogram(binwidth = 100)\n```\n\n::: {.cell-output-display}\n![](TimShores_challenge5_files/figure-html/unnamed-chunk-6-3.png){width=672}\n:::\n:::\n\n\n## Bivariate Visualization(s)\nAny additional comments?\n",
    "supporting": [
      "TimShores_challenge5_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}