{
  "hash": "54358aed09ca15523a50bf87cbcc7d16",
  "result": {
    "markdown": "---\ntitle: \"Challenge 3\"\nauthor: \"Aritra Basu\"\ndescription: \"Tidy Data: Pivoting\"\ndate: \"03/22/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_3\n  - Aritra Basu\n  - eggs\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(dplyr)\nlibrary(descr)\nlibrary(readr)\nlibrary(readxl)\nlibrary(summarytools)\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n## Reading in data, and cleaning it.\n\nI am working on the first sheet of organiceggpoultry. The first task is to clean the data. I have removed a column of NAs, and then used mutate, separate and fill to separate the month and years. I have then used select to consider the variables that are associated with eggs and not with chickens.\n\n::: {.cell}\n\n```{.r .cell-code}\negg_poultry <- read_excel(\"_data/organiceggpoultry.xls\", skip=4)\nsubset <- subset( egg_poultry, select = -c(6) )\n\n\ndf1 <- subset %>% separate(...1, sep = \" \", into=c('month', 'year'), remove = FALSE)\ndf2 <- mutate_all(df1, funs(replace(., .=='/1', NA)))\ndf3 <- mutate_all(df2, funs(replace(., .=='Jan', 'January')))\n\ndf4 <- df3 %>% fill(year)\nstr(df4)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [120 × 12] (S3: tbl_df/tbl/data.frame)\n $ ...1                           : chr [1:120] \"Jan 2004\" \"February\" \"March\" \"April\" ...\n $ month                          : chr [1:120] \"January\" \"February\" \"March\" \"April\" ...\n $ year                           : chr [1:120] \"2004\" \"2004\" \"2004\" \"2004\" ...\n $ Extra Large \nDozen            : chr [1:120] \"230\" \"230\" \"230\" \"234.5\" ...\n $ Extra Large 1/2 Doz.\n1/2 Dozen: chr [1:120] \"132\" \"134.5\" \"137\" \"137\" ...\n $ Large \nDozen                  : chr [1:120] \"230\" \"226.25\" \"225\" \"225\" ...\n $ Large \n1/2 Doz.               : chr [1:120] \"126\" \"128.5\" \"131\" \"131\" ...\n $ Whole                          : chr [1:120] \"197.5\" \"197.5\" \"209\" \"212\" ...\n $ B/S Breast                     : chr [1:120] \"645.5\" \"642.5\" \"642.5\" \"642.5\" ...\n $ Bone-in Breast                 : chr [1:120] \"too few\" \"too few\" \"too few\" \"too few\" ...\n $ Whole Legs                     : chr [1:120] \"193.5\" \"193.5\" \"193.5\" \"193.5\" ...\n $ Thighs                         : chr [1:120] \"too few\" \"203\" \"203\" \"203\" ...\n```\n:::\n:::\n\nNow, I change some of the variables from character to numeric.\n\n::: {.cell}\n\n```{.r .cell-code}\ndf5<-select(df4, \"month\", \"year\", \"Extra Large \nDozen\", \"Extra Large 1/2 Doz.\n1/2 Dozen\", \"Large \nDozen\", \"Large \n1/2 Doz.\")\ncolnames(df5) <- c('month','year','Extra Large Dozen', 'Extra Large Half Dozen', 'Large Dozen', 'Large Half Dozen')\ndf6<-df5 %>%\n  mutate_at('year', as.numeric)%>%\n  mutate_at('Extra Large Dozen', as.numeric)%>%\n  mutate_at('Extra Large Half Dozen', as.numeric)%>%\n  mutate_at('Large Dozen', as.numeric)%>%\n  mutate_at('Large Half Dozen', as.numeric)\n  str(df6)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [120 × 6] (S3: tbl_df/tbl/data.frame)\n $ month                 : chr [1:120] \"January\" \"February\" \"March\" \"April\" ...\n $ year                  : num [1:120] 2004 2004 2004 2004 2004 ...\n $ Extra Large Dozen     : num [1:120] 230 230 230 234 236 ...\n $ Extra Large Half Dozen: num [1:120] 132 134 137 137 137 ...\n $ Large Dozen           : num [1:120] 230 226 225 225 225 ...\n $ Large Half Dozen      : num [1:120] 126 128 131 131 131 ...\n```\n:::\n\n```{.r .cell-code}\nclean_eggs<-df6\n```\n:::\n\n\n### Describing the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nview(dfSummary(clean_eggs, style=\"grid\", graph.magnif = 0.75, valid.col = FALSE))\n```\n:::\n\nIt can be seen that the dimension is 120 x 6. \n\nThe observations are in a month year format. The values are prices per cartons for different types of packaging for a particular month between 2004 and 2013 (inclusive). In the original file, the years, as well as the values were stored as characters, and I have converted them to numeric.\n\nThe way the data is presented is fairly intuitive. But this could become cumbersome if we had a few more columns. However, the data is already tidy\n\n## Anticipating the end results\n### Challenge: Describing the final dimensions\n\nDocumenting my work here.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#existing rows/cases\nnrow(clean_eggs)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 120\n```\n:::\n\n```{.r .cell-code}\n#existing columns/cases\nncol(clean_eggs)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 6\n```\n:::\n\n```{.r .cell-code}\n#expected rows/cases\nnrow(clean_eggs) * (ncol(clean_eggs)-4)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 240\n```\n:::\n\n```{.r .cell-code}\n# expected columns \n4\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 4\n```\n:::\n:::\n\n### Challenge: Pivoting the Chosen Data\nThe new case again is a month year unit. However, the data is now in a long format instead of wide. It satisfies the requirement of tidy data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclean_eggs<-pivot_longer(clean_eggs, col = c(\"Extra Large Dozen\", \"Extra Large Half Dozen\", \"Large Dozen\", \"Large Half Dozen\"),\n                 names_to=\"Type of packaging\",\n                 values_to = \"Price of Cartons\")\nclean_eggs\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 480 × 4\n   month     year `Type of packaging`    `Price of Cartons`\n   <chr>    <dbl> <chr>                               <dbl>\n 1 January   2004 Extra Large Dozen                    230 \n 2 January   2004 Extra Large Half Dozen               132 \n 3 January   2004 Large Dozen                          230 \n 4 January   2004 Large Half Dozen                     126 \n 5 February  2004 Extra Large Dozen                    230 \n 6 February  2004 Extra Large Half Dozen               134.\n 7 February  2004 Large Dozen                          226.\n 8 February  2004 Large Half Dozen                     128.\n 9 March     2004 Extra Large Dozen                    230 \n10 March     2004 Extra Large Half Dozen               137 \n# … with 470 more rows\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}