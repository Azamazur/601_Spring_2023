{
  "hash": "bb3523bd6a35297a3c6e3aaffac0da00",
  "result": {
    "markdown": "---\ntitle: \"Challenge 6\"\nauthor: \"Tim Shores\"\ndescription: \"Visualizing Time and Relationships\"\ndate: \"03/31/2023\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_6\n  - hotel_bookings\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to:\n\n1)  read in a data set, and describe the data set using both words and any supporting information (e.g., tables, etc)\n2)  tidy data (as needed, including sanity checks)\n3)  mutate variables as needed (including sanity checks)\n4)  create at least one graph including time (evolution)\n   - try to make them \"publication\" ready (optional)\n   - Explain why you choose the specific graph type\n5)  Create at least one graph depicting part-whole or flow relationships\n   - try to make them \"publication\" ready (optional)\n   - Explain why you choose the specific graph type\n\n[R Graph Gallery](https://r-graph-gallery.com/) is a good starting point for thinking about what information is conveyed in standard graph types, and includes example R code.\n\n(be sure to only include the category tags for the data you use!)\n\n## Read in data\n\nI chose to read in hotel_bookings.csv. My high school computer science teacher taught us that laziness is the key to quality computer science. I read in the hotel bookings data in Challenge 2. Therefore, I get to reuse my code from that earlier lesson. Quality computing!\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#| echo: true\nhotelbks <- read.csv(file = \"../posts/_data/hotel_bookings.csv\") # read in data\nhbrows <- prettyNum(nrow(hotelbks), big.mark = \",\", scientific = FALSE)  # Apply comma-separated format\nhbcols <- prettyNum(ncol(hotelbks), big.mark = \",\", scientific = FALSE)\nnumtoprint <- 12\nmonthtoprint <- \"January\"\nyeartoprint <- 2017\nhotelbks[1:numtoprint,]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n          hotel is_canceled lead_time arrival_date_year arrival_date_month\n1  Resort Hotel           0       342              2015               July\n2  Resort Hotel           0       737              2015               July\n3  Resort Hotel           0         7              2015               July\n4  Resort Hotel           0        13              2015               July\n5  Resort Hotel           0        14              2015               July\n6  Resort Hotel           0        14              2015               July\n7  Resort Hotel           0         0              2015               July\n8  Resort Hotel           0         9              2015               July\n9  Resort Hotel           1        85              2015               July\n10 Resort Hotel           1        75              2015               July\n11 Resort Hotel           1        23              2015               July\n12 Resort Hotel           0        35              2015               July\n   arrival_date_week_number arrival_date_day_of_month stays_in_weekend_nights\n1                        27                         1                       0\n2                        27                         1                       0\n3                        27                         1                       0\n4                        27                         1                       0\n5                        27                         1                       0\n6                        27                         1                       0\n7                        27                         1                       0\n8                        27                         1                       0\n9                        27                         1                       0\n10                       27                         1                       0\n11                       27                         1                       0\n12                       27                         1                       0\n   stays_in_week_nights adults children babies meal country market_segment\n1                     0      2        0      0   BB     PRT         Direct\n2                     0      2        0      0   BB     PRT         Direct\n3                     1      1        0      0   BB     GBR         Direct\n4                     1      1        0      0   BB     GBR      Corporate\n5                     2      2        0      0   BB     GBR      Online TA\n6                     2      2        0      0   BB     GBR      Online TA\n7                     2      2        0      0   BB     PRT         Direct\n8                     2      2        0      0   FB     PRT         Direct\n9                     3      2        0      0   BB     PRT      Online TA\n10                    3      2        0      0   HB     PRT  Offline TA/TO\n11                    4      2        0      0   BB     PRT      Online TA\n12                    4      2        0      0   HB     PRT      Online TA\n   distribution_channel is_repeated_guest previous_cancellations\n1                Direct                 0                      0\n2                Direct                 0                      0\n3                Direct                 0                      0\n4             Corporate                 0                      0\n5                 TA/TO                 0                      0\n6                 TA/TO                 0                      0\n7                Direct                 0                      0\n8                Direct                 0                      0\n9                 TA/TO                 0                      0\n10                TA/TO                 0                      0\n11                TA/TO                 0                      0\n12                TA/TO                 0                      0\n   previous_bookings_not_canceled reserved_room_type assigned_room_type\n1                               0                  C                  C\n2                               0                  C                  C\n3                               0                  A                  C\n4                               0                  A                  A\n5                               0                  A                  A\n6                               0                  A                  A\n7                               0                  C                  C\n8                               0                  C                  C\n9                               0                  A                  A\n10                              0                  D                  D\n11                              0                  E                  E\n12                              0                  D                  D\n   booking_changes deposit_type agent company days_in_waiting_list\n1                3   No Deposit  NULL    NULL                    0\n2                4   No Deposit  NULL    NULL                    0\n3                0   No Deposit  NULL    NULL                    0\n4                0   No Deposit   304    NULL                    0\n5                0   No Deposit   240    NULL                    0\n6                0   No Deposit   240    NULL                    0\n7                0   No Deposit  NULL    NULL                    0\n8                0   No Deposit   303    NULL                    0\n9                0   No Deposit   240    NULL                    0\n10               0   No Deposit    15    NULL                    0\n11               0   No Deposit   240    NULL                    0\n12               0   No Deposit   240    NULL                    0\n   customer_type   adr required_car_parking_spaces total_of_special_requests\n1      Transient   0.0                           0                         0\n2      Transient   0.0                           0                         0\n3      Transient  75.0                           0                         0\n4      Transient  75.0                           0                         0\n5      Transient  98.0                           0                         1\n6      Transient  98.0                           0                         1\n7      Transient 107.0                           0                         0\n8      Transient 103.0                           0                         1\n9      Transient  82.0                           0                         1\n10     Transient 105.5                           0                         0\n11     Transient 123.0                           0                         0\n12     Transient 145.0                           0                         0\n   reservation_status reservation_status_date\n1           Check-Out              2015-07-01\n2           Check-Out              2015-07-01\n3           Check-Out              2015-07-02\n4           Check-Out              2015-07-02\n5           Check-Out              2015-07-03\n6           Check-Out              2015-07-03\n7           Check-Out              2015-07-03\n8           Check-Out              2015-07-03\n9            Canceled              2015-05-06\n10           Canceled              2015-04-22\n11           Canceled              2015-06-23\n12          Check-Out              2015-07-05\n```\n:::\n:::\n\n\n### Briefly describe the data\n\nThe hotel bookings set includes **119,390** observations under **32** variables. It shows operational business data from multiple hotels in multiple markets and countries, managed by multiple companies. The data is likely the product of market research produced by a third-party analyst or management consultant.\n\nHere's the first 12 rows from the January, 2017 subset of the hotel bookings data set, with a selection of columns to display market and demographic info.\n\n## Tidy Data (as needed)\n\nIs your data already tidy, or is there work to be done? Be sure to anticipate your end result to provide a sanity check, and document your work here.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhotelsub <- subset(hotelbks, #arrival_date_year == yeartoprint & arrival_date_month == monthtoprint,  \n                   select = c(hotel, is_canceled, arrival_date_year, arrival_date_month, arrival_date_day_of_month, stays_in_weekend_nights, stays_in_week_nights, country, market_segment, adults, children, babies))\n\nhotelsub[1:numtoprint,]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n          hotel is_canceled arrival_date_year arrival_date_month\n1  Resort Hotel           0              2015               July\n2  Resort Hotel           0              2015               July\n3  Resort Hotel           0              2015               July\n4  Resort Hotel           0              2015               July\n5  Resort Hotel           0              2015               July\n6  Resort Hotel           0              2015               July\n7  Resort Hotel           0              2015               July\n8  Resort Hotel           0              2015               July\n9  Resort Hotel           1              2015               July\n10 Resort Hotel           1              2015               July\n11 Resort Hotel           1              2015               July\n12 Resort Hotel           0              2015               July\n   arrival_date_day_of_month stays_in_weekend_nights stays_in_week_nights\n1                          1                       0                    0\n2                          1                       0                    0\n3                          1                       0                    1\n4                          1                       0                    1\n5                          1                       0                    2\n6                          1                       0                    2\n7                          1                       0                    2\n8                          1                       0                    2\n9                          1                       0                    3\n10                         1                       0                    3\n11                         1                       0                    4\n12                         1                       0                    4\n   country market_segment adults children babies\n1      PRT         Direct      2        0      0\n2      PRT         Direct      2        0      0\n3      GBR         Direct      1        0      0\n4      GBR      Corporate      1        0      0\n5      GBR      Online TA      2        0      0\n6      GBR      Online TA      2        0      0\n7      PRT         Direct      2        0      0\n8      PRT         Direct      2        0      0\n9      PRT      Online TA      2        0      0\n10     PRT  Offline TA/TO      2        0      0\n11     PRT      Online TA      2        0      0\n12     PRT      Online TA      2        0      0\n```\n:::\n:::\n\n\nAre there any variables that require mutation to be usable in your analysis stream? For example, do you need to calculate new values in order to graph them? Can string values be represented numerically? Do you need to turn any variables into factors and reorder for ease of graphics and visualization?\n\nDocument your work here.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhotelsub <- hotelsub %>%\n  mutate('arrival_date' = make_date(year = arrival_date_year, month = arrival_date_month, day = arrival_date_day_of_month),\n         market_segment = factor(market_segment))\n\nhotelsub[1:numtoprint,]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n          hotel is_canceled arrival_date_year arrival_date_month\n1  Resort Hotel           0              2015               July\n2  Resort Hotel           0              2015               July\n3  Resort Hotel           0              2015               July\n4  Resort Hotel           0              2015               July\n5  Resort Hotel           0              2015               July\n6  Resort Hotel           0              2015               July\n7  Resort Hotel           0              2015               July\n8  Resort Hotel           0              2015               July\n9  Resort Hotel           1              2015               July\n10 Resort Hotel           1              2015               July\n11 Resort Hotel           1              2015               July\n12 Resort Hotel           0              2015               July\n   arrival_date_day_of_month stays_in_weekend_nights stays_in_week_nights\n1                          1                       0                    0\n2                          1                       0                    0\n3                          1                       0                    1\n4                          1                       0                    1\n5                          1                       0                    2\n6                          1                       0                    2\n7                          1                       0                    2\n8                          1                       0                    2\n9                          1                       0                    3\n10                         1                       0                    3\n11                         1                       0                    4\n12                         1                       0                    4\n   country market_segment adults children babies arrival_date\n1      PRT         Direct      2        0      0         <NA>\n2      PRT         Direct      2        0      0         <NA>\n3      GBR         Direct      1        0      0         <NA>\n4      GBR      Corporate      1        0      0         <NA>\n5      GBR      Online TA      2        0      0         <NA>\n6      GBR      Online TA      2        0      0         <NA>\n7      PRT         Direct      2        0      0         <NA>\n8      PRT         Direct      2        0      0         <NA>\n9      PRT      Online TA      2        0      0         <NA>\n10     PRT  Offline TA/TO      2        0      0         <NA>\n11     PRT      Online TA      2        0      0         <NA>\n12     PRT      Online TA      2        0      0         <NA>\n```\n:::\n:::\n\n\n## Time Dependent Visualization\n\n\n## Visualizing Part-Whole Relationships\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}