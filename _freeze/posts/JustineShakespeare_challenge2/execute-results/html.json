{
  "hash": "8a44448c7938c48efcd4800c9d4fcb95",
  "result": {
    "markdown": "---\ntitle: \"Challenge 2 - FAOStat Cattle & Dairy\"\nauthor: \"Justine Shakespeare\"\ndesription: \"Data wrangling: using group() and summarise()\"\ndate: \"02/28/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_2\n  - faostat\n  - Justine Shakespeare\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Loading and cleaning the data \n\nFirst we'll load the tidyverse package and read in the data. We'll focus on the FAOStat data on cattle and dairy.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nFAOCD <- read_csv(\"_data/FAOSTAT_cattle_dairy.csv\")\n```\n:::\n\nThis data includes quantities of specific cattle and dairy elements (Milk Animals, Yield, and Production) organized by geographical region (including countries, regions, and continents) and year. A more detailed description of the variables in this dataset is provided below.\n\nLet's take a look at the dataset with the head() and dim() functions.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(FAOCD)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 36449    14\n```\n:::\n\n```{.r .cell-code}\nhead(FAOCD)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 14\n  Domai…¹ Domain Area …² Area  Eleme…³ Element Item …⁴ Item  Year …⁵  Year Unit \n  <chr>   <chr>    <dbl> <chr>   <dbl> <chr>     <dbl> <chr>   <dbl> <dbl> <chr>\n1 QL      Lives…       2 Afgh…    5318 Milk A…     882 Milk…    1961  1961 Head \n2 QL      Lives…       2 Afgh…    5420 Yield       882 Milk…    1961  1961 hg/An\n3 QL      Lives…       2 Afgh…    5510 Produc…     882 Milk…    1961  1961 tonn…\n4 QL      Lives…       2 Afgh…    5318 Milk A…     882 Milk…    1962  1962 Head \n5 QL      Lives…       2 Afgh…    5420 Yield       882 Milk…    1962  1962 hg/An\n6 QL      Lives…       2 Afgh…    5510 Produc…     882 Milk…    1962  1962 tonn…\n# … with 3 more variables: Value <dbl>, Flag <chr>, `Flag Description` <chr>,\n#   and abbreviated variable names ¹​`Domain Code`, ²​`Area Code`,\n#   ³​`Element Code`, ⁴​`Item Code`, ⁵​`Year Code`\n```\n:::\n:::\n\n\nThe results of these functions tell us that we have a dataset with over 36,000 observations (rows) and 14 variables (columns). It looks like some of these columns contain redundant information (such as many of the columns with \"Code\" in the name) and/or they have the same value for all observations (indicating that they were likely taken from a larger dataset). Let's use the unique() function to determine if any of these columns hold just one value, in which case we can remove them for our analysis and keep this information as metadata for this dataset.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(FAOCD$Domain)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Livestock Primary\"\n```\n:::\n\n```{.r .cell-code}\nunique(FAOCD$`Domain Code`)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"QL\"\n```\n:::\n\n```{.r .cell-code}\nunique(FAOCD$`Item Code`)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 882\n```\n:::\n\n```{.r .cell-code}\nunique(FAOCD$Item)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Milk, whole fresh cow\"\n```\n:::\n\n```{.r .cell-code}\nunique(FAOCD$Flag)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"F\"  \"Fc\" NA   \"*\"  \"Im\" \"M\"  \"A\" \n```\n:::\n\n```{.r .cell-code}\nunique(FAOCD$`Flag Description`)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"FAO estimate\"                                                                \n[2] \"Calculated data\"                                                             \n[3] \"Official data\"                                                               \n[4] \"Unofficial figure\"                                                           \n[5] \"FAO data based on imputation methodology\"                                    \n[6] \"Data not available\"                                                          \n[7] \"Aggregate, may include official, semi-official, estimated or calculated data\"\n```\n:::\n:::\n\nThe first four of these columns contain just one value for all observations, so we can remove them when we trim down the dataset. Let's use the `group_by()`, `count()`, and `head()` functions to take a closer look at the relationship between the variables, *Flag* and *Flag Description*. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nflagCheck <- FAOCD %>% \n  group_by(Flag) %>% \n  count(`Flag Description`)\n\nhead(flagCheck, 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 7 × 3\n# Groups:   Flag [7]\n  Flag  `Flag Description`                                                     n\n  <chr> <chr>                                                              <int>\n1 *     Unofficial figure                                                    810\n2 A     Aggregate, may include official, semi-official, estimated or calc…  3070\n3 F     FAO estimate                                                        7045\n4 Fc    Calculated data                                                    13136\n5 Im    FAO data based on imputation methodology                            2270\n6 M     Data not available                                                    74\n7 <NA>  Official data                                                      10044\n```\n:::\n:::\n\nAs implied by the names of these variables, the values in the Flag and Flag Description columns are directly related - Flag Description describes the notation in the Flag column. It looks as if these variables provide information about the source of the data in each relevant observation. In the interest of managing fewer variables while also not wanting to lose important context, let's drop Flag and keep the Flag Description variable. \n\nBut before we remove any columns, let's take a closer look at the relationship between the *Element*, *Value* and *Unit* variables. We assume that Unit describes the unit of measurement for the quantities in the Value column. We can use the `group_by()` and `count()` function to explore the relationship between Element and Unit.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvariableCheck <- FAOCD %>% \n  group_by(Element) %>% \n  count(`Unit`)\n\nhead(variableCheck, 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 3\n# Groups:   Element [3]\n  Element      Unit       n\n  <chr>        <chr>  <int>\n1 Milk Animals Head   12158\n2 Production   tonnes 12170\n3 Yield        hg/An  12121\n```\n:::\n:::\n\n\nIt looks as if there are three values repeated in the Element column: Milk Animals, Production, and Yield. And each of these values corresponds to a particular Unit: Head, tonnes, and hg/An, respectively. Because of this relationship, if we'd like to reduce the number of variables we're dealing with we could create columns for each Element, and note the unit in the column name, rather than have a separate column for this information. \n\nFirst, let's use the `select()` function to create a new dataframe that removes all of the columns we have decided we don't need:  the columns with \"Code\" in the name, the columns with only one value throughout the dataset, the Flag column, and finally the Unit column. We'll use `head()` to check out our new dataframe.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nFAOCD_subset <- select(FAOCD, Area, Element, Year, Value, `Flag Description`)\n\nhead(FAOCD_subset)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 5\n  Area        Element       Year  Value `Flag Description`\n  <chr>       <chr>        <dbl>  <dbl> <chr>             \n1 Afghanistan Milk Animals  1961 700000 FAO estimate      \n2 Afghanistan Yield         1961   5000 Calculated data   \n3 Afghanistan Production    1961 350000 FAO estimate      \n4 Afghanistan Milk Animals  1962 700000 FAO estimate      \n5 Afghanistan Yield         1962   5000 Calculated data   \n6 Afghanistan Production    1962 350000 FAO estimate      \n```\n:::\n:::\n\n\nNow let's use `pivot_wider()` to create columns for each of the values listed in the Elements column. Then we can use the `rename()` function to rename each of those columns to specify the unit (originally stored in the Unit column). We'll use `head()` to take a look at the final dataframe.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nFAOCD_Pivot <- pivot_wider(FAOCD_subset, names_from=Element, values_from = Value)\n\nFAOCD_Tidy <- rename(FAOCD_Pivot, \"Milk Animals (Head)\" = \"Milk Animals\", \"Yield (hg/An)\" = \"Yield\", \"Production (tonnes)\" = \"Production\")\n\nhead(FAOCD_Tidy)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 6\n  Area         Year `Flag Description` `Milk Animals (Head)` Yield (hg…¹ Produ…²\n  <chr>       <dbl> <chr>                              <dbl>       <dbl>   <dbl>\n1 Afghanistan  1961 FAO estimate                      700000          NA  350000\n2 Afghanistan  1961 Calculated data                       NA        5000      NA\n3 Afghanistan  1962 FAO estimate                      700000          NA  350000\n4 Afghanistan  1962 Calculated data                       NA        5000      NA\n5 Afghanistan  1963 FAO estimate                      780000          NA  400000\n6 Afghanistan  1963 Calculated data                       NA        5128      NA\n# … with abbreviated variable names ¹​`Yield (hg/An)`, ²​`Production (tonnes)`\n```\n:::\n:::\n\nNow that we've transformed our data and made it easier to deal with, we can begin the analysis and exploration of the data itself.\n\n## Data exploration and analysis\n\nLet's get a sense of the data we have in this new dataframe with the `glimpse()` function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(FAOCD_Tidy)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 27,102\nColumns: 6\n$ Area                  <chr> \"Afghanistan\", \"Afghanistan\", \"Afghanistan\", \"Af…\n$ Year                  <dbl> 1961, 1961, 1962, 1962, 1963, 1963, 1964, 1964, …\n$ `Flag Description`    <chr> \"FAO estimate\", \"Calculated data\", \"FAO estimate…\n$ `Milk Animals (Head)` <dbl> 700000, NA, 700000, NA, 780000, NA, 780000, NA, …\n$ `Yield (hg/An)`       <dbl> NA, 5000, NA, 5000, NA, 5128, NA, 5128, NA, 5172…\n$ `Production (tonnes)` <dbl> 350000, NA, 350000, NA, 400000, NA, 400000, NA, …\n```\n:::\n:::\n\nNote that we went from over 36,000 rows to just over 27,000, and 14 columns to 6. \n\nThe variables we have remaining include four double (numeric) variables, including *Year*, and the three variables we transformed using `pivot_wider()`: *Milk Animals (Head)*, *Yield (hg/An)*, and *Production (tonnes)*. Presumably this data describes the quantity of these elements (Milk Animals, Yield and Production) for each indicated year and region. Let's use the `range()` function to see what time period this data covers.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrange(FAOCD_Tidy$Year)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1961 2018\n```\n:::\n:::\n\n\nThis data covers a little less than the past 60 years or so, with the last 5 years (since 2018) not included.\n\nThis dataframe also includes two character variables, *Area* and *Flag Description*. We have already discussed what the Flag Description variable tells us; since we're interested in comparing across countries and regions, let's use the `unique()` function to see what is in the *Area* column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(FAOCD_Tidy$Area)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  [1] \"Afghanistan\"                                         \n  [2] \"Albania\"                                             \n  [3] \"Algeria\"                                             \n  [4] \"American Samoa\"                                      \n  [5] \"Angola\"                                              \n  [6] \"Antigua and Barbuda\"                                 \n  [7] \"Argentina\"                                           \n  [8] \"Armenia\"                                             \n  [9] \"Australia\"                                           \n [10] \"Austria\"                                             \n [11] \"Azerbaijan\"                                          \n [12] \"Bahamas\"                                             \n [13] \"Bahrain\"                                             \n [14] \"Bangladesh\"                                          \n [15] \"Barbados\"                                            \n [16] \"Belarus\"                                             \n [17] \"Belgium\"                                             \n [18] \"Belgium-Luxembourg\"                                  \n [19] \"Belize\"                                              \n [20] \"Benin\"                                               \n [21] \"Bermuda\"                                             \n [22] \"Bhutan\"                                              \n [23] \"Bolivia (Plurinational State of)\"                    \n [24] \"Bosnia and Herzegovina\"                              \n [25] \"Botswana\"                                            \n [26] \"Brazil\"                                              \n [27] \"British Virgin Islands\"                              \n [28] \"Brunei Darussalam\"                                   \n [29] \"Bulgaria\"                                            \n [30] \"Burkina Faso\"                                        \n [31] \"Burundi\"                                             \n [32] \"Cabo Verde\"                                          \n [33] \"Cambodia\"                                            \n [34] \"Cameroon\"                                            \n [35] \"Canada\"                                              \n [36] \"Central African Republic\"                            \n [37] \"Chad\"                                                \n [38] \"Chile\"                                               \n [39] \"China, Hong Kong SAR\"                                \n [40] \"China, mainland\"                                     \n [41] \"China, Taiwan Province of\"                           \n [42] \"Colombia\"                                            \n [43] \"Comoros\"                                             \n [44] \"Congo\"                                               \n [45] \"Costa Rica\"                                          \n [46] \"Côte d'Ivoire\"                                       \n [47] \"Croatia\"                                             \n [48] \"Cuba\"                                                \n [49] \"Cyprus\"                                              \n [50] \"Czechia\"                                             \n [51] \"Czechoslovakia\"                                      \n [52] \"Democratic People's Republic of Korea\"               \n [53] \"Democratic Republic of the Congo\"                    \n [54] \"Denmark\"                                             \n [55] \"Djibouti\"                                            \n [56] \"Dominica\"                                            \n [57] \"Dominican Republic\"                                  \n [58] \"Ecuador\"                                             \n [59] \"Egypt\"                                               \n [60] \"El Salvador\"                                         \n [61] \"Eritrea\"                                             \n [62] \"Estonia\"                                             \n [63] \"Eswatini\"                                            \n [64] \"Ethiopia\"                                            \n [65] \"Ethiopia PDR\"                                        \n [66] \"Falkland Islands (Malvinas)\"                         \n [67] \"Fiji\"                                                \n [68] \"Finland\"                                             \n [69] \"France\"                                              \n [70] \"French Guyana\"                                       \n [71] \"French Polynesia\"                                    \n [72] \"Gabon\"                                               \n [73] \"Gambia\"                                              \n [74] \"Georgia\"                                             \n [75] \"Germany\"                                             \n [76] \"Ghana\"                                               \n [77] \"Greece\"                                              \n [78] \"Grenada\"                                             \n [79] \"Guadeloupe\"                                          \n [80] \"Guatemala\"                                           \n [81] \"Guinea\"                                              \n [82] \"Guinea-Bissau\"                                       \n [83] \"Guyana\"                                              \n [84] \"Haiti\"                                               \n [85] \"Honduras\"                                            \n [86] \"Hungary\"                                             \n [87] \"Iceland\"                                             \n [88] \"India\"                                               \n [89] \"Indonesia\"                                           \n [90] \"Iran (Islamic Republic of)\"                          \n [91] \"Iraq\"                                                \n [92] \"Ireland\"                                             \n [93] \"Israel\"                                              \n [94] \"Italy\"                                               \n [95] \"Jamaica\"                                             \n [96] \"Japan\"                                               \n [97] \"Jordan\"                                              \n [98] \"Kazakhstan\"                                          \n [99] \"Kenya\"                                               \n[100] \"Kuwait\"                                              \n[101] \"Kyrgyzstan\"                                          \n[102] \"Lao People's Democratic Republic\"                    \n[103] \"Latvia\"                                              \n[104] \"Lebanon\"                                             \n[105] \"Lesotho\"                                             \n[106] \"Liberia\"                                             \n[107] \"Libya\"                                               \n[108] \"Liechtenstein\"                                       \n[109] \"Lithuania\"                                           \n[110] \"Luxembourg\"                                          \n[111] \"Madagascar\"                                          \n[112] \"Malawi\"                                              \n[113] \"Malaysia\"                                            \n[114] \"Mali\"                                                \n[115] \"Malta\"                                               \n[116] \"Martinique\"                                          \n[117] \"Mauritania\"                                          \n[118] \"Mauritius\"                                           \n[119] \"Mexico\"                                              \n[120] \"Mongolia\"                                            \n[121] \"Montenegro\"                                          \n[122] \"Montserrat\"                                          \n[123] \"Morocco\"                                             \n[124] \"Mozambique\"                                          \n[125] \"Myanmar\"                                             \n[126] \"Namibia\"                                             \n[127] \"Nepal\"                                               \n[128] \"Netherlands\"                                         \n[129] \"Netherlands Antilles (former)\"                       \n[130] \"New Caledonia\"                                       \n[131] \"New Zealand\"                                         \n[132] \"Nicaragua\"                                           \n[133] \"Niger\"                                               \n[134] \"Nigeria\"                                             \n[135] \"Niue\"                                                \n[136] \"North Macedonia\"                                     \n[137] \"Norway\"                                              \n[138] \"Oman\"                                                \n[139] \"Pakistan\"                                            \n[140] \"Palestine\"                                           \n[141] \"Panama\"                                              \n[142] \"Papua New Guinea\"                                    \n[143] \"Paraguay\"                                            \n[144] \"Peru\"                                                \n[145] \"Philippines\"                                         \n[146] \"Poland\"                                              \n[147] \"Portugal\"                                            \n[148] \"Puerto Rico\"                                         \n[149] \"Qatar\"                                               \n[150] \"Republic of Korea\"                                   \n[151] \"Republic of Moldova\"                                 \n[152] \"Réunion\"                                             \n[153] \"Romania\"                                             \n[154] \"Russian Federation\"                                  \n[155] \"Rwanda\"                                              \n[156] \"Saint Lucia\"                                         \n[157] \"Saint Vincent and the Grenadines\"                    \n[158] \"Samoa\"                                               \n[159] \"Sao Tome and Principe\"                               \n[160] \"Saudi Arabia\"                                        \n[161] \"Senegal\"                                             \n[162] \"Serbia\"                                              \n[163] \"Serbia and Montenegro\"                               \n[164] \"Seychelles\"                                          \n[165] \"Sierra Leone\"                                        \n[166] \"Slovakia\"                                            \n[167] \"Slovenia\"                                            \n[168] \"Solomon Islands\"                                     \n[169] \"Somalia\"                                             \n[170] \"South Africa\"                                        \n[171] \"South Sudan\"                                         \n[172] \"Spain\"                                               \n[173] \"Sri Lanka\"                                           \n[174] \"Sudan\"                                               \n[175] \"Sudan (former)\"                                      \n[176] \"Suriname\"                                            \n[177] \"Sweden\"                                              \n[178] \"Switzerland\"                                         \n[179] \"Syrian Arab Republic\"                                \n[180] \"Tajikistan\"                                          \n[181] \"Thailand\"                                            \n[182] \"Togo\"                                                \n[183] \"Tonga\"                                               \n[184] \"Trinidad and Tobago\"                                 \n[185] \"Tunisia\"                                             \n[186] \"Turkey\"                                              \n[187] \"Turkmenistan\"                                        \n[188] \"Uganda\"                                              \n[189] \"Ukraine\"                                             \n[190] \"United Arab Emirates\"                                \n[191] \"United Kingdom of Great Britain and Northern Ireland\"\n[192] \"United Republic of Tanzania\"                         \n[193] \"United States of America\"                            \n[194] \"United States Virgin Islands\"                        \n[195] \"Uruguay\"                                             \n[196] \"USSR\"                                                \n[197] \"Uzbekistan\"                                          \n[198] \"Vanuatu\"                                             \n[199] \"Venezuela (Bolivarian Republic of)\"                  \n[200] \"Viet Nam\"                                            \n[201] \"Wallis and Futuna Islands\"                           \n[202] \"Yemen\"                                               \n[203] \"Yugoslav SFR\"                                        \n[204] \"Zambia\"                                              \n[205] \"Zimbabwe\"                                            \n[206] \"World\"                                               \n[207] \"Africa\"                                              \n[208] \"Eastern Africa\"                                      \n[209] \"Middle Africa\"                                       \n[210] \"Northern Africa\"                                     \n[211] \"Southern Africa\"                                     \n[212] \"Western Africa\"                                      \n[213] \"Americas\"                                            \n[214] \"Northern America\"                                    \n[215] \"Central America\"                                     \n[216] \"Caribbean\"                                           \n[217] \"South America\"                                       \n[218] \"Asia\"                                                \n[219] \"Central Asia\"                                        \n[220] \"Eastern Asia\"                                        \n[221] \"Southern Asia\"                                       \n[222] \"South-eastern Asia\"                                  \n[223] \"Western Asia\"                                        \n[224] \"Europe\"                                              \n[225] \"Eastern Europe\"                                      \n[226] \"Northern Europe\"                                     \n[227] \"Southern Europe\"                                     \n[228] \"Western Europe\"                                      \n[229] \"Oceania\"                                             \n[230] \"Australia and New Zealand\"                           \n[231] \"Melanesia\"                                           \n[232] \"Polynesia\"                                           \n```\n:::\n:::\n\n\nWithout going through this list exhaustively, it looks as if this variable contains all countries in the world, some historic geopolitical areas (such as \"Sudan (former)\" or \"USSR\") and larger regions of the world (such as \"World\", \"Africa\", and subsets of continents, such as \"Caribbean\", \"Central Asia\", etc.). \n\n#### Cattle and dairy production by continent\n\nLet's first explore what this data can tell us about cattle and dairy production as a high level, let's create a dataframe with just the continents, using the `filter()` function. We'll use the `table()` function to check out how many observations we have for each continent in our resulting dataframe.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nFAOCD_Continents <- FAOCD_Tidy %>% \n  filter(Area == \"Oceania\" | Area == \"Europe\" | Area == \"Asia\" | Area == \"South America\" | Area == \"Northern America\" | Area == \"Africa\")\n\ntable(FAOCD_Continents$Area)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n          Africa             Asia           Europe Northern America \n             116              116              116              116 \n         Oceania    South America \n             116              116 \n```\n:::\n:::\n\n\nLet's take a look at the continents with the highest level of mean production since 2010, as well as the standard deviation and the median. To be able to better compare standard deviations across different continents, let's calculate a standard deviation proportion variable, which will show the standard deviation as a proportion of the mean. We can use the `filter()`, `group_by()`, `summarize()`, and `arrange()` functions to create this table.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nFAOCD_Continents_Since2010 <- FAOCD_Continents %>% \n  filter(Year > 2010) %>% \n  group_by(Area) %>% \n  summarize(\"Mean Production\" = mean(`Production (tonnes)`, na.rm = TRUE), \n            \"Standard Deviation of Production\" = sd(`Production (tonnes)`, na.rm = TRUE),\n            \"SD Proportion\" = sd(`Production (tonnes)`, na.rm = TRUE)/mean(`Production (tonnes)`, na.rm = TRUE),\n            \"Median Production\" = median(`Production (tonnes)`, na.rm = TRUE)) %>% \n  arrange(desc(`Mean Production`))\n\nhead(FAOCD_Continents_Since2010, 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 5\n  Area             `Mean Production` Standard Deviation of Pro…¹ SD Pr…² Media…³\n  <chr>                        <dbl>                       <dbl>   <dbl>   <dbl>\n1 Europe                  215588432.                    5307525.  0.0246  2.18e8\n2 Asia                    189924225.                   14421624.  0.0759  1.89e8\n3 Northern America        102217738.                    3168627.  0.0310  1.02e8\n4 South America            62636485.                    1524029.  0.0243  6.24e7\n5 Africa                   36103158.                     693762.  0.0192  3.63e7\n6 Oceania                  29973059.                    1761488.  0.0588  3.07e7\n# … with abbreviated variable names ¹​`Standard Deviation of Production`,\n#   ²​`SD Proportion`, ³​`Median Production`\n```\n:::\n:::\n\nThis table shows that since 2010 Europe has had the highest mean production levels, followed by Asia and Northern America. Europe also has the highest median production levels. It is interesting to note that the standard deviation is highest for Asia, indicating that production levels vary more each year in Asia than they do in the other continents. \n\nTo get a sense of how things have changed, let's take a look at the same metrics before 1980.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nFAOCD_Continents_Before1980 <- FAOCD_Continents %>% \n  filter(Year < 1980) %>% \n  group_by(Area) %>% \n  summarize(\"Mean Production\" = mean(`Production (tonnes)`, na.rm = TRUE), \n            \"Standard Deviation of Production\" = sd(`Production (tonnes)`, na.rm = TRUE),\n            \"SD Proportion\" = sd(`Production (tonnes)`, na.rm = TRUE)/mean(`Production (tonnes)`, na.rm = TRUE),\n            \"Median Production\" = median(`Production (tonnes)`, na.rm = TRUE)) %>% \n  arrange(desc(`Mean Production`))\n\nhead(FAOCD_Continents_Before1980, 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 5\n  Area             `Mean Production` Standard Deviation of Pro…¹ SD Pr…² Media…³\n  <chr>                        <dbl>                       <dbl>   <dbl>   <dbl>\n1 Europe                  224168181.                   24023230.  0.107   2.24e8\n2 Northern America         62709675.                    1896295.  0.0302  6.25e7\n3 Asia                     26875055.                    4828728.  0.180   2.62e7\n4 South America            18831641.                    2948457.  0.157   1.83e7\n5 Oceania                  12897186.                     691680.  0.0536  1.30e7\n6 Africa                    9251734.                    1041579.  0.113   9.45e6\n# … with abbreviated variable names ¹​`Standard Deviation of Production`,\n#   ²​`SD Proportion`, ³​`Median Production`\n```\n:::\n:::\n\nThis table shows data from 1961 to 1979, more than 30 years earlier than the data from the previous table we looked at (data since 2010). While most of the continents are ranked similarly to how they are in the more recent data, this new table shows us that North America used to produce more on average than Asia, and that Oceania used to produce more on average than Africa. In this dataset most of the continents have a higher standard deviation than they do in the more recent dataset, indicating that the variability of production over the years was higher back then than it has been in recent years.\n\nFinally, let's take a closer look at the larger dataset that includes countries, to see which countries have higher mean production levels in recent years. While we won't try to do an exhaustive cleaning of this data for this assignment, let's at least remove some of the higher level geographical observations in the Area variable, including \"World\" and the continents, so it's easier to focus on the countries in our analysis. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nFAOCD_PrimarilyCountries <- FAOCD_Tidy %>% \n  filter(Area != \"World\" & Area != \"Oceania\" & Area != \"Europe\" & Area != \"Asia\" & Area != \"South America\" & Area != \"Northern America\" & Area != \"Africa\" & Area != \"Americas\")\n```\n:::\n\n\nLet's check out the countries and smaller regions with the highest mean production levels. We'll use the `filter()`, `group_by()`, `summarize()`, and `arrange()` functions to create this table.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nFAOCD_PrimarilyCountries_Since2010 <- FAOCD_PrimarilyCountries %>% \n  filter(Year > 2010) %>% \n  group_by(Area) %>% \n  summarize(\"Mean Production\" = mean(`Production (tonnes)`, na.rm = TRUE), \n            \"Standard Deviation of Production\" = sd(`Production (tonnes)`, na.rm = TRUE),\n            \"SD Proportion\" = sd(`Production (tonnes)`, na.rm = TRUE)/mean(`Production (tonnes)`, na.rm = TRUE),\n            \"Median Production\" = median(`Production (tonnes)`, na.rm = TRUE)) %>% \n  arrange(desc(`Mean Production`))\n\nhead(FAOCD_PrimarilyCountries_Since2010, 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 10 × 5\n   Area                     `Mean Production` Standard Deviati…¹ SD Pr…² Media…³\n   <chr>                                <dbl>              <dbl>   <dbl>   <dbl>\n 1 Southern Asia                    96623566.          13094625. 0.136    9.51e7\n 2 United States of America         94026020.           3455285. 0.0367   9.40e7\n 3 Western Europe                   80955426.           3030278. 0.0374   8.14e7\n 4 Eastern Europe                   72396074             545233. 0.00753  7.24e7\n 5 India                            71425625           11766081. 0.165    7.00e7\n 6 Eastern Asia                     44241353.           3078035. 0.0696   4.40e7\n 7 Northern Europe                  36679892.           1846617. 0.0503   3.70e7\n 8 China, mainland                  33768088.           3164112. 0.0937   3.36e7\n 9 Brazil                           33652779.           1058081. 0.0314   3.38e7\n10 Germany                          31966846            1041304. 0.0326   3.25e7\n# … with abbreviated variable names ¹​`Standard Deviation of Production`,\n#   ²​`SD Proportion`, ³​`Median Production`\n```\n:::\n:::\n\nUnsurprisingly, there are a lot of smaller geographical regions showing up at the top of this list. If we had more time we would thoroughly clean this data by comparing the list of countries in the Area column to a list of current countries in the world and remove all values that didn't match. But for now we can still see that there are a few countries showing up even in this list of the top ten, including the United States, India, mainland China, and Brazil. India looks to have a considerably higher standard deviation than the other countries on this list. \n\n## Conclusion and further research\n\nAs noted several times in this analysis, with more time I would more thoroughly clean the Area variable, so that we could more easily create tables focused on just countries, geographical regions, or continents. I also did not research the original dataset as thoroughly as I would have liked to, which would provide more information about each variable (specifically the Milk Animals, Production, and Yield) and provide more nuance to these findings. \n\nThere are so many different ways you could explore this data! Another area that would be worth exploring is the change over time of production and how this varies across countries and regions. Visualization could be used to better illustrate any patterns and trends discovered in the data. \n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}